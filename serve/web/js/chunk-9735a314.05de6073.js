(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9735a314"],{"1c43":function(t,e,s){"use strict";var i=s("5ddc"),a=s.n(i);a.a},"5ddc":function(t,e,s){},bbe5:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-loading",{attrs:{vLoading:t.vLoading}},[s("div",{staticClass:"header-img",style:"background: url("+t.blogsDetails.imgUrl+") no-repeat top right/cover"},[s("div",{staticClass:"shadow-dialog"},[s("div",{staticClass:"container container-text"},[s("h1",{staticClass:"fs-8xl"},[t._v(t._s(t.blogsDetails.title))]),s("p",{staticClass:"fs-2xl"},[t._v(t._s(t.blogsDetails.description))])])])]),s("container-body",{attrs:{isGrey:!0,isWhite:!0}},[s("div",{staticClass:"blogs-box d-flex pb-5 pr"},[s("div",{staticClass:"blogs-content flex-1",class:{"pr-4 border-right":t.isShowMenu}},[s("div",{staticClass:"d-flex jc-between ai-center mb-5"},[s("h2",{staticClass:"m-0 article-zw"},[s("i",{staticClass:"col-primary"},[t._v("# ")]),t._v("正文 ")]),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.isShowMenu,expression:"!isShowMenu"}],staticClass:"hover-gradient fs-2xl col-grey-1",on:{click:function(e){t.isShowMenu=!0}}},[t._v("「 显示目录 」")])]),s("div",{directives:[{name:"highlight",rawName:"v-highlight"}],ref:"article",staticClass:"article markdown-body",domProps:{innerHTML:t._s(t.blogsDetails.content)}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMenu,expression:"isShowMenu"}],staticClass:"blogs-menu pl-4 toc-sticky"},[s("div",{staticClass:"d-flex jc-between ai-center mb-5"},[s("h2",{staticClass:"m-0"},[s("i",{staticClass:"col-primary"},[t._v("# ")]),t._v("TOC ")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isShowMenu,expression:"isShowMenu"}],staticClass:"hover-gradient fs-2xl col-grey-1",on:{click:function(e){t.isShowMenu=!1}}},[t._v("「 隐藏目录 」")])]),t._l(t.articleToc,(function(e){return s("div",{key:e.id,staticClass:"menu-title text-ellipsis",style:{paddingLeft:e.indent+"em"},attrs:{title:e.text},on:{click:function(s){return t.scrollTo(e.id)}}},[t._v(t._s(e.text))])}))],2)]),s("div",{staticClass:"fs-2xl"},[s("h2",{},[s("i",{staticClass:"col-primary"},[t._v("# ")]),t._v("评论 ")]),s("comment-textarea",{attrs:{model:"comments",type:"parent",blogsId:t.id,placeholder:"大家请坐下，陈独秀同志，要发言了。。。"},on:{toResponse:t.getBlogsComments}}),s("comment-list",{attrs:{model:"comments",commentsList:t.parentComments,blogsId:t.id},on:{getCommentList:t.getBlogsComments}})],1)])],1)],1)},a=[];function n(t){let e=t.match(/^<h\d\s[^>]*data-id=(?:"|')([^"']+)/),s="";return e?s=e[1]:(s=parseInt(1e3*Math.random(),10)+"_"+parseInt(100*Math.random()*100),t=t.replace(/(^<h\d)/,`$1 data-id="${s}" `)),{htmlPart:t,id:s}}function o(t){var e=[];t=t.replace(/<h(\d)(?:\s[^>]+)*>([^<]+)/g,(t,s,i)=>{let a=n(t,s,i);return e.push({indent:s,text:i,id:a.id}),a.htmlPart});let s=Math.min.apply(Math,e.map(t=>t.indent));return e.forEach(t=>{t.indent=t.indent-s}),{article:t,toc:e}}var l=o,r=s("3e70"),c=s.n(r),d=s("cf6b"),m={components:{},data(){return{vLoading:!0,isShowMenu:!0,id:this.$route.params.id,blogsDetails:{imgUrl:""},articleToc:[],parentComments:[]}},created(){this.getBlogsComments()},mounted(){this.getBlogsDetails()},methods:{async getBlogsDetails(){let t=await this.$axios.get(`/blogs/${this.id}`);this.blogsDetails=t.data;let e=l(c()(t.data.content));console.log(e),this.blogsDetails.content=e.article,this.articleToc=e.toc,this.vLoading=!1,this.$nextTick(()=>{Object(d["a"])()})},addCodeSupport(){},async getBlogsComments(){let t=await this.$axios.get(`/comments/${this.id}`);console.log(t);let e=t.data;this.parentComments=e.filter(t=>"5e52a80981bf76430fd982f0"==t.parent),this.parentComments.forEach(t=>t.children=e.filter(e=>e.parent==t._id))},scrollTo(t){let e=document.querySelector('[data-id="'+t+'"]');e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},h=m,g=(s("1c43"),s("623f")),v=Object(g["a"])(h,i,a,!1,null,"f43c3474",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-9735a314.05de6073.js.map